{% extends 'base.html' %}
{% load static %}
{% block content %}
  <div class="container">
    <h2 class="my-4 text-center">My Tasks</h2>

    <div class="alert alert-info" role="alert">
      <strong>Completed Tasks:</strong> {{ completed_tasks_count }}<br>
      <strong>Incomplete Tasks:</strong> {{ incomplete_tasks_count }}
    </div>

    <div class="row">
      <div class="col-md-6">
        <h4 class="text-center text-success">Completed Tasks</h4>
        {% if task_list %}
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Task Name</th>
                <th>Priority</th>
                <th>Completed At</th>
              </tr>
            </thead>
            <tbody>
              {% for task in task_list %}
                {% if task.is_completed %}
                  <tr>
                    <td>
                      <a href="{% url 'task_manager:task-detail' task.id %}" class="text-success font-weight-bold">{{ task.name }}</a>
                    </td>
                    <td>{{ task.get_priority_display }}</td>
                    <td>{{ task.done_at|date:"Y-m-d H:i" }}</td>
                  </tr>
                {% endif %}
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p class="text-center">No completed tasks available.</p>
        {% endif %}
      </div>

      <div class="col-md-6">
        <h4 class="text-center text-danger">Incomplete Tasks</h4>
        {% if task_list %}
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Task Name</th>
                <th>Priority</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              {% for task in task_list %}
                {% if not task.is_completed %}
                  <tr>
                    <td>
                      <a href="{% url 'task_manager:task-detail' task.id %}" class="text-danger font-weight-bold">{{ task.name }}</a>
                    </td>
                    <td>{{ task.get_priority_display }}</td>
                    <td class="text-danger">Not yet completed</td>
                  </tr>
                {% endif %}
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p class="text-center">No incomplete tasks available.</p>
        {% endif %}
      </div>
    </div>
  </div>
{% endblock %}
